\section{Introduction}
\label{sec:intro}

\IEEEPARstart{M}{any} factors are driving change within the electrical power industry over recent decades.
One such factor is the ongoing electrification of rural regions around the globe.
For agricultural consumers, electrification enables increased yields and economic development.
Ref. \cite{Mandelli2016} reviews technology and applications for off-grid systems for rural electrification.

Use of PV and other renewable distributed energy resources facilitates rural electrification by reducing the infrastructure cost required.
PV energy is generally well aligned with water needs\cite{Aliyu2018}.
Ref. \cite{Aliyu2018} reviews numerous such applications around the world while \cite{Muhsen2017} reviews the PV and water pumping modeling, design, and control approaches in the literature.

In recent years, much research has been done into the benefits and issues related to microgrids\cite{Chandak2021,Choudhury2020}.
While microgrids can facilitate rural electrification by allowing connection of loads and distributed energy sources with or without a connection to the main grid,
development of microgrids requires new techniques for planning, control, and operation\cite{Bhuiyan2014,Reca-Cardena2018}.

Much of the literature regarding optimization of microgrids has focused on design optimization and optimal sizing of system components\cite{Bhuiyan2014,Dawoud2018}.
This paper focuses on the operational planning of an agricultural microgrid with a grid connection, a DER (PV), irrigation pumping load, and water and electrical energy storage.
This paper presents an original mathematical formulation of the operational optimization problem for model-predictive control (MPC) of an agricultural microgrid.
Ref. \cite{Ghasemi2018} approaches a similar problem, formulating a non-linear optimization problem and using the two-point estimate method (TPEM) to account for uncertainty. 
In \cite{Shoeb2018}, the authors evaluate three rule-based control strategies using the HOMER Pro microgrid analysis tool.
Ref. \cite{Wang2014} proposes a MPC for battery energy storage system (BESS) associated with a grid-connected PV system. The proposed control scheme determines the BESS power schedule, maximizing profit from real-time energy price arbitrage by time-shifting while accounting for BESS costs associated with cycling and smoothing the plant and BESS output.

The novelty of this work is ....
