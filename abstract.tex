% Abstract_should_be_150_to_200_words.
A demonstration agricultural microgrid containing PV, battery energy storage (BSS) and multiple water pumps and reservoirs is presented.
A mathematical model of the cost of operating the demonstration microgrid is developed.
The mathematical model includes hybrid inverter source switching and BSS charging modes in addition to power balance and inter-period energy and water-level coupling.
Electricity pricing and irrigation water use efficiency are allowed to vary by time of day.
The mathematical model is formulated as a mixed-integer linear program (MILP),
implemented in Python using Pyomo, and optimized using the open-source CBC solver to plan pumping and water usage.
Data from a demonstration system at a farm in Turkey is used to demonstrate the proposed model.
Results of the optimization of the demonstration system shows intuitive results superior to a rule-based initialization.
The model may serve as the basis for model predictive control (MPC) or stochastic model predictive control (SMPC).